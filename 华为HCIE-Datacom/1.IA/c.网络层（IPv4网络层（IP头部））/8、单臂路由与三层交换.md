```
不同网段不同VLAN通信  
不同网段之间通信需要存在网关设备（三层设备）
```

```
1.通过路由器的接口来充当终端的网关  
  逻辑简单，配置容易  
  路由器设备每一个接口都连接一个网段，容易造成接口资源浪费  
  路由器的接口只能配置一个网段
```

```
2.通过路由器的子接口来充当终端的网关（单臂路由）
```
 
```
  通过创建子接口来实现一个物理接口配置多个网段  
  [AR2]interface GigabitEthernet 0/0/0.\<1-4096\>  创建子接口
```
 
```
  交换机连接终端配置access，交换机互联配置trunk  
  交换机连接路由器的接口需要配置为trunk保留VLAN标签发布
```
 
```
  子接口的特性，是使用物理接口的MAC地址  
  即一个物理接口创建的所有子接口都使用相同的MAC地址  
  所以子接口的网段无法通过DMAC地址进行区分
```
 
```
  如何让子接口接口对应网段的数据？  
    需要为不同网段的数据进行标记（就是为数据打上不同的VLAN标签）
```
 
```
  子接口如何区分不同的VLAN标签数据？  
    [AR2-GigabitEthernet0/0/0.1]dot1q termination vid 10    
子接口绑定VLAN 10  
        1.接收接口绑定VLAN ID值的数据  
        2.接收对应VLAN标签数据后，执行剥离标签的操作  
        3.发送数据时，需要为数据打上接口对应的VLAN标签
```
 
```
  子接口没有具备物理接口的所有功能：  
     需要为子接口手工开启arp广播的处理能力  
     [AR2-GigabitEthernet0/0/0.2]arp broadcast enable 
```
 
```
  优点：可以通过一个路由器的接口 实现多个网段的连接，  
节省了路由器接口的资源  
  缺点：子接口共享物理接口的资源（带宽），  
所以容易造成转发的瓶颈
```

![Exported image](Exported%20image%2020251206145633-0.png) ![Exported image](Exported%20image%2020251206145635-1.png)

```
3.使用三层交换机设备来充当设备的网关
```
 
```
  将三层交换机先当作二层交换机进行VLAN的创建与划分
```
 
```
  三层交换机需要配置IP地址网段充当终端的网关  
  交换机的接口默认是二层的接口，无法进行三层网络地址的配置
```
 
```
  三层交换机需要存在三层接口来配置三层网络地址  
  创建三层逻辑接口：[S6]interface vlanif 10  
  逻辑接口的值和VLAN ID是一一对应的关系
```
 
```
  三层逻辑VLANif接口的作用：  
   1.接收对应VLAN ID的数据  
   2.接收VLAN标签数据后，剥离VLAN标签  
   3.发送数据后，打上对应VLAN的标签
```

![Exported image](Exported%20image%2020251206145638-2.png)

```
[HUAWEI-GE1/0/1]undo portswitch     
将接口的模式从二层切换为三层
```