```
OSPF的路由汇总：  
1.区域内  
   不存在可以执行的汇总配置，想要汇总只需要宣告的网段进行CIDR即可
```
 
```
[AR1-LoopBack0]ip ad 192.168.10.1 32  
[AR1-ospf-1-area-0.0.0.0]network 192.168.0.0 0.0.255.255  
不做其他配置：能正常通告在LSA中
```

![Exported image](Exported%20image%2020251206152635-0.png)  

```
如果undo network 192.168.0.0 0.0.255.255， 则不存在通告LSA信息
```
 ![Exported image](Exported%20image%2020251206152636-1.png)  

```
2.区域间  
ABR执行区域间（1、2、3）LSA转换为3类LSA的汇总  
[AR2-ospf-1-area-0.0.0.1]abr-summary 4.4.4.0 255.255.255.252   
后续可以跟上的命令：          
cost           设置汇总LSA的开销值  
         not-advertise  汇总LSA不通告（相当于没有配置汇总）  
     
ABR执行汇总后，不会向汇总后的区域中泛洪明细的LSA，只泛洪汇总的  
LSA  
   对于区域内的IR设备而言，不感知汇总的LSA  
   
```
 
```
   汇总路由和明细路由之间的关联：  
     1.如果明细路由失效一部分，则汇总路由依然存在  
     2.如果明细路由全部失效，则汇总路由失效  
     3.汇总路由的下一跳和明细路由的下一跳没有明确的关系  
     4.汇总路由的cost继承了明细路由最大的cost
```
 
```
   执行路由汇总的问题：  
     当AR2在area 1执行路由汇总，将汇总的3类LSA在区域0中泛洪  
     AR3在区域0中收到汇总的LSA，会泛洪到area 1中  
     AR3可以泛洪的原因：没有在区域1中学习到对应3类汇总LSA的1 、2类LSA
```
 
```
    **如果存在多台ABR，则每一台ABR设备都需要执行区域间的汇总
```
    
```
3.区域外  
   ASBR执行区域外5类LSA的汇总  
   [AR4-ospf-1]asbr-summary 192.168.4.0 255.255.255.252  
   ASBR执行汇总后，不会在通告被汇总包含的明细5类LSA，只通告汇总的5类LSA  
   对于OSPF自治系统内的其他设备而言，不感知汇总的5类LSA
```
 
```
   汇总路由和明细路由之间的关联：  
     1.如果明细路由失效一部分，则汇总路由依然存在  
     2.如果明细路由全部失效，则汇总路由失效  
     3.汇总路由的下一跳和明细路由的下一跳没有明确的关系  
   [AR4-ospf-1]default cost inherit-metric 表示引入路由时继承原有路由的开销
```
 
```
  对于外部路由引入后，是否执行汇总，都不会引发环路  
  *因为5类LSA的防环依靠于 区域内SPF计算和区域间防环规则   ```
 
```
   [AR4-ospf-1]asbr-summary 192.168.4.0 255.255.255.252 distribute-delay 10   
   设置汇总5类LSA的通告延迟时间  
（防止明细路由没有全部学习到，就学了汇总的5类LSA，导致出现路由黑洞）
```
 
```
[AR1]ospf  
[AR1-ospf-1]silent-interface GigabitEthernet 0/0/2   
            指定0/0/2接口作为静默接口  
静默接口不会发送协议报文，只会将接口网段在OSPF中通告  
一般将连接业务终端网段的接口作为静默接口  
不会接收到Hello 报文
```

![Exported image](Exported%20image%2020251206152939-2.png) ![Exported image](Exported%20image%2020251206153145-3.png)

```
1.汇总前：存在3条来自AR2通告的4.4.4.0/30网段的3条3类LSA信息
```

![Exported image](Exported%20image%2020251206153151-4.png)

```
2.执行命令：abr-summary 4.4.4.0 255.255.255.0，  
只存在1条来自AR2 通告的3类LSA信息
```

![Exported image](Exported%20image%2020251206153154-5.png)  

```
那么就会在AR3，和AR4中的LSDB中产生：
```

![Exported image](Exported%20image%2020251206153700-6.png)  

![Exported image](Exported%20image%2020251206153702-7.png) ![Exported image](Exported%20image%2020251206154712-8.png) ![Exported image](Exported%20image%2020251206154815-9.png)