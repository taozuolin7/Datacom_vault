```
OSPF路由过滤：  
 1.区域内  
     1类、2类LSA的过滤  
   过滤方式：  
     1.LSA计算路由的过滤  
        [AR3]acl 2000  
        [AR3-acl-basic-2000]rule 5 deny source 4.4.4.4 0   
        [AR3]ospf   
        [AR3-ospf-1]filter-policy 2000 import   
        设备正常收到LSA信息，且通过LSA计算出OSPF路由，  
但是将OSPF路由加入IP路由表时执行了过滤  
        
```

![](https://graph.microsoft.com/v1.0/users\('3061002242@qq.com'\)/onenote/resources/0-0374f33e41304b13ac94bdc63872ce1a!1-61B4E7A81984391!sa848ec112a7f4773bf93cd20ae69625b/$value)   
```
     2.LSA过滤  
        [AR4]interface GigabitEthernet 0/0/0  
        [AR4-GigabitEthernet0/0/0]ospf filter-lsa-out all  
        通过在接口过滤掉LSA的通告，其他设备不会接收过滤设备的LSA  
        要求被过滤的设备重启进程，刷新OSPF的LSDB，才能显示被过滤后的LSDB
```
 
```
 2.区域间   
   3类LSA过滤  
   过滤方式：  
 1.LSA计算路由的过滤  
       和区域内的方式相同
```
 
```
 2.LSA过滤  
   1.区域间LSA的过滤（在ABR执行区域间LSA转换时过滤）(以区域为视角)  
       [AR2]acl 2000  
       [AR2-acl-basic-2000]rule 5 deny source 4.4.4.4 0   
       [AR2]ospf  
       [AR2-ospf-1]area 1   
在区域1执行发送LSA的过滤  
       [AR2-ospf-1-area-0.0.0.1]filter 2000 export      
       [AR2-ospf-1]area 0   
在区域0执行接收LSA的过滤  
       [AR2-ospf-1-area-0.0.0.0]filter 2000 import      
             
  2.接口下LSA的过滤  
      [AR2]acl 2000  
      [AR2-acl-basic-2000]rule 5 deny source 4.4.4.4 0   
      [AR2-GigabitEthernet0/0/0]ospf filter-lsa-out summary acl 2000 
```
 
```
 3.区域外  
     5类LSA的过滤  
   过滤方式：  
     1.LSA计算路由的过滤  
        和区域内的方式相同  
     2.LSA过滤  
        1.ASBR执行5类LSA的过滤  
           [AR4]acl 2000  
           [AR4-acl-basic-2000]rule 5 deny source 192.168.4.4 0   
           [AR4]ospf  
           [AR4-ospf-1]filter-policy 2000 export       
（ASBR对于外部5类LSA引入时的过滤）
```
 
```
        2.接口下LSA的过滤  
           [AR4]acl 2000  
           [AR4-acl-basic-2000]rule 5 deny source 192.168.4.4 0   
           [AR4-GigabitEthernet0/0/0]ospf filter-lsa-out ase acl 2000 
```

```
OSPF认证：  
*接口认证和区域认证在最终的结果上没有任何区别，唯一的区别是认证的影响范围  
1.接口认证：认证的功能只作用于认证的接口  
    [AR4-GigabitEthernet0/0/0]ospf authentication-mode simple plain huawei 
```
 
```
2.区域认证：认证的功能会影响所有在该区域宣告的接口  
    [AR3]ospf  
    [AR3-ospf-1]area 1   
    [AR3-ospf-1-area-0.0.0.1]authentication-mode simple plain huawei
```
 
```
    [AR3-GigabitEthernet0/0/0]ospf authentication-mode null   
*接口认证优于区域认证
```
 
```
*如果存在虚链路，则需要考虑是否配置了区域0的区域认证  
 如果区域0 存在区域认证，则虚链路也需要配置认证  
 [AR2-ospf-1-area-0.0.0.1]vlink-peer 10.4.4.4 md5 1 plain Huawei@123
```

```
1.在没有配置：
```

![](https://graph.microsoft.com/v1.0/users\('3061002242@qq.com'\)/onenote/resources/0-77784523e5a24862bbb2a10d32c0a500!1-61B4E7A81984391!sa848ec112a7f4773bf93cd20ae69625b/$value)

```
2.配置后AR3上没有4.4.4.4的路由
```

![](https://graph.microsoft.com/v1.0/users\('3061002242@qq.com'\)/onenote/resources/0-9b2c9c4076114283b5a0c3ea7f178419!1-61B4E7A81984391!sa848ec112a7f4773bf93cd20ae69625b/$value)

```
在AR2上能看到4.4.4.4的路由信息：
```

![](https://graph.microsoft.com/v1.0/users\('3061002242@qq.com'\)/onenote/resources/0-8cf8f2b0e420402f80d02bd0b5fd50f8!1-61B4E7A81984391!sa848ec112a7f4773bf93cd20ae69625b/$value)

```
但是ping不通，原因是在AR3上没有了4.4.4.4的路由
```

![](https://graph.microsoft.com/v1.0/users\('3061002242@qq.com'\)/onenote/resources/0-53c85332f70645929ff13c200aaf0c0e!1-61B4E7A81984391!sa848ec112a7f4773bf93cd20ae69625b/$value)