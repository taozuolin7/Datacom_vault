#### LSP隧道
对于一条LSP，一旦在Ingress节点给报文打上标签，流量的转发就完全由标签决定了。流量对LSP的中间节点是透明的，从这个意义上来说，一条LSP可以看作是一条LSP隧道。
#### MPLS TE隧道
在MPLS TE中，经常会把多条LSP联合起来使用，并将这些LSP与一个虚拟隧道接口关联起来，这样的一组LSP称为MPLS TE隧道。MPLS TE隧道涉及以下几个概念：
- 隧道接口：隧道接口是为实现报文的封装而提供的一种点对点类型的虚拟接口，与Loopback接口类似，都是一种逻辑接口。
- 隧道标识（Tunnel ID）：采用十进制数字来唯一标识一条MPLS TE隧道，以便对隧道进行规划和管理，这个数字称为Tunnel ID。
- LSP标识（LSP ID）：采用十进制数字来唯一标识一条LSP，以便对LSP进行规划和管理，这个数字称为LSP ID。
#### 链路属性
MPLS TE的链路属性用于标识一条物理链路上的带宽资源使用情况、路由成本及链路的可靠性，包括如下内容：
- 链路总带宽
    物理链路所具有的带宽值。
- 最大可预留带宽
    本链路中可以预留给MPLS TE隧道使用的带宽值，最大可预留带宽小于等于链路总带宽。
- TE Metric
    链路的TE度量。为了增强对TE隧道路径计算中的可控性，MPLS TE提供了TE Metric，使得隧道在计算路径时能更独立于IGP的路由选路。缺省情况下，链路采用IGP的度量值作为TE度量值。
- SRLG
    共享风险链路组SRLG（Shared Risk Link Group）是一组共享一个公共的物理资源（比如共享一根光纤）的链路。同一个SRLG的链路具有相同的风险等级，即如果SRLG中的一条链路失效，组内的其他链路也失效。
    SRLG主要用在CR-LSP热备份和TE FRR组网中增强TE隧道的可靠性。
- 链路管理组
    也称为==链路颜色==，是一个表示链路属性的32位向量，在实际的使用中其中的每一个比特位都可以设置或不设置，网络的管理员可以将其关联为任何需要的意义。比如说，用来表示链路的带宽、性能或者完全出于管理策略（比如标识这段链路上有MPLS TE隧道经过或者这段链路上承载的为组播业务）。链路管理组需要和亲和属性配合使用来达到控制隧道路径的目的。

#### 隧道属性
MPLS TE隧道所使用的LSP称为基于一定约束条件建立的LSP，通常简称为CR-LSP（Constraint-based Routed Label Switched Path），这些约束条件可以称为隧道属性。
与普通LSP（比如LDP LSP）不同，CR-LSP的建立不仅依赖路由信息，还需要满足其他一些约束条件，这些约束条件包括带宽约束和路
径约束两个方面:
- 带宽约束
    主要为隧道带宽。
- 路径约束
    主要包括==显式路径==、==优先级与抢占==、==路径锁定==、==亲和属性==和==跳数限制。==

建立和管理约束条件的机制称为基于约束的路由==CR（Constraint-based Routing）==，下面对CR的主要内容进行介绍。
- 隧道带宽
    隧道的带宽值，需要根据隧道要承载的业务进行规划，隧道建立时，将根据这个值在隧道的沿途进行带宽预留，从而为业务提供带宽保证。
- 显式路径
    显式路径是指在CR-LSP建立时由用户手工指定其必须经过（或避开）指定的节点，可以分为如下两种：
    - 严格显式路径
        严格方式可以指定路径上必须经过哪些节点，**下一跳与前一跳必须直接相连**。通过严格显式路径，可以最精确地控制LSP所经过的路径。
	- 松散显式路径
		松散方式可以指定路径上必须经过哪些节点，但是列出的节点之间可以有其他节点。
	- 优先级与抢占
		优先级与抢占能根据TE隧道承载业务的重要程度来解决隧道建立过程中的资源竞争问题。
		隧道使用建立优先级（Setup Priority）和保持优先级（Holding Priority）来决定是否可以进行抢占。优先级用来指示新建路径和当前已经建立路径之间的抢占关系，如果新建CR-LSP的建立优先级高于已经建立CR-LSP的保持优先级，则前者抢占后者的资源。优先级的范围从0到7，7为最低优先权。同一条隧道的建立优先级不能高于保持优先级。
		如果在建立隧道的过程中，无法找到满足所需带宽要求的路径，则拆除另外一条已经建立的路径，占用为它分配的带宽资源，这种处理方式称为抢占（Preemption）。抢占分为硬抢占和软抢占两种：
		- 硬抢占：高优先级的隧道和低优先级隧道发生资源竞争时，高优先级隧道直接抢占低优先级隧道的资源，通常会造成低优先级隧道的部分流量丢失。
		- 软抢占：高优先级的隧道和低优先级隧道发生资源竞争时，采用Make-Before-Break的原则，直到低优先级隧道的流量切换到新TE隧道后，高优先级隧道才抢占原低优先级隧道的资源。
		优先级和抢占属性共同决定隧道之间的资源抢占关系。当多条隧道需要建立时，建立优先级高的LSP隧道优先占有资源、优先建立。当带宽等资源不够时，保持优先级低的、已建成的LSP隧道的带宽资源可能被一个建立优先级高的并且资源不够的LSP隧道抢占。


