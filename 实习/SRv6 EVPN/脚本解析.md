```
配置SRv6基本功能
segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 # 配置 SRv6 封装时，外层 IPv6 报文的源地址为 2001:DB8:1::1。
 locator SR1 ipv6-prefix 2001:DB8:100:: 76 static 16 args 8
  opcode ::1 end no-flavor
  opcode ::5000 end-dt4 vpn-instance vpn1 evpn # 专门用于 IPv4 私网 VPN 报文的 SRv6 解封装和终结。
  opcode ::6000 end-dt6 vpn-instance vpn1 evpn 
# args 8：指定SID中参数位（Arguments）的长度为8位——用于携带业务参数（如 VPN 实例、EVPN 标识等）。

isis 1
Ipv6 enable topology ipv6
segment-routing ipv6 locator SR1 auto-sid-disable
```
**segment-routing ipv6 locator SR1 auto-sid-disable**
这个命令会**完全禁用上述自动生成和发布 Auto-SID 的行为**，具体表现为：
1. 设备不再自动创建 Node SID、Adjacency SID 等基础 SRv6 SID；
2. IS-IS 协议不会向全网发布任何自动生成的 SRv6 SID 信息；
3. 所有需要使用的 SRv6 SID（如你之前配置的 END、END-DT4/END-DT6 等业务型 SID），都必须由管理员**手动配置**，而非依赖系统自动生成。
# 为什么要禁用 Auto-SID？（典型应用场景）

这个配置主要用于**精细化规划 SRv6 网络**的场景，常见原因包括：

1. **全网 SID 统一规划**：运营商 / 大型企业网络中，SRv6 SID 的结构（Locator/Function/Arguments 位）需要全网标准化（比如 Function 位取值对应固定功能），自动生成的 SID 可能不符合规划规则，易导致 SID 冲突或功能不匹配；
2. **减少控制面开销**：Auto-SID 会通过 IS-IS 发布，禁用后可减少 IS-IS 协议报文的大小和数量，降低网络设备的控制面负担；
3. **适配 EVPN+SRv6 组网**：在 EVPN+SRv6 场景中，SRv6 SID 主要由 EVPN 控制面（而非 IS-IS）发布，禁用 Auto-SID 可避免 IS-IS 自动生成的 SID 与 EVPN 发布的 SID 冲突；
4. **多 Locator 部署**：若设备绑定多个 SRv6 Locator（如核心域 Locator、VPN 域 Locator），自动生成的 SID 会混淆不同 Locator 的用途，禁用后可手动为不同 Locator 分配专属 SID；
5. **仅使用业务型 SID**：若网络中仅需手动配置的业务 SID（如 END-DT4/END-DT6 用于 VPN 终结），无需基础的 Node/Adjacency SID，禁用 Auto-SID 可简化配置。

```
配置BGP peer
bgp 64880
 l2vpn-family evpn
  peer 2001:DB8:5::5 enable
  peer 2001:DB8:5::5 advertise encap-type srv6 # 
```

